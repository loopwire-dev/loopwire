language: typescript
type: library

fileGroups:
  sources:
    - 'src/**/*'
  configs:
    - 'tsconfig.json'
    - 'package.json'

tasks:
  build:
    command: 'tsc --build'
    inputs:
      - '@group(sources)'
      - '@group(configs)'
    outputs:
      - 'dist'

  generate:
    command: 'bash ../../scripts/generate-types.sh'
    inputs:
      - '/apps/daemon/schema/**/*'
    outputs:
      - 'src/generated'
