@import "tailwindcss";
@import "@fontsource/figtree/400.css";
@import "@fontsource/figtree/500.css";
@import "@fontsource/figtree/700.css";
@import "@fontsource/outfit/400.css";
@import "@fontsource/outfit/500.css";
@import "@fontsource/outfit/700.css";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --default-font-family:
    "ui-sans-serif",
    "-apple-system",
    "system-ui",
    "Segoe UI",
    "Helvetica",
    "Apple Color Emoji",
    "Arial",
    "sans-serif",
    "Segoe UI Emoji",
    "Segoe UI Symbol";
  --default-mono-font-family:
    "ui-monospace",
    "SFMono-Regular",
    "SF Mono",
    "Menlo",
    "Consolas",
    "Liberation Mono",
    "monospace";
  --font-sans:
    "Figtree",
    var(--default-font-family);
  --font-platform: "Figtree", var(--default-font-family);
  --color-surface: #ffffff;
  --color-surface-raised: #f3f3f3;
  --color-surface-overlay: #e8e8e8;
  --color-foreground: #1f1f1f;
  --color-sidebar: #f3f3f3;
  --color-accent: #0f8577;
  --color-accent-foreground: #ffffff;
  --color-accent-hover: #0d7367;
  --color-border: #e5e5e5;
  --color-muted: #616161;
}

.dark {
  --color-surface: #242424;
  --color-surface-raised: #252526;
  --color-surface-overlay: #2d2d30;
  --color-foreground: #f2f2f2;
  --color-sidebar: #1b1b1b;
  --color-accent: #0f8577;
  --color-accent-foreground: #ffffff;
  --color-accent-hover: #0d7367;
  --color-border: #3c3c3c;
  --color-muted: #c5c5c5;
}

body {
  margin: 0;
  color: var(--color-foreground);
  background-color: var(--color-surface);
  font-family: var(--font-sans);
}

.lw-platform {
  font-family: var(--font-platform);
}

html,
body,
#root {
  height: 100%;
  overflow: hidden;
}

button:not(:disabled),
a[href],
summary,
select:not(:disabled),
label[for],
[role="button"],
[role="link"],
[role="menuitem"],
[tabindex]:not([tabindex="-1"]) {
  cursor: pointer;
}

.lw-sidebar-compact-cursor,
.lw-sidebar-compact-cursor * {
  cursor: none !important;
}

/* xterm.js overrides â€” padding lives on the container so FitAddon
   accounts for it when calculating terminal rows/cols.
   overscroll-behavior prevents trackpad scroll-chaining to ancestors. */
.xterm {
  overscroll-behavior: contain;
}

.lw-dialog-overlay,
.lw-dialog-content {
  opacity: 0;
  transition: opacity 160ms ease;
}

.lw-dialog-overlay[data-state="open"],
.lw-dialog-content[data-state="open"] {
  opacity: 1;
}

.lw-dialog-overlay[data-state="closed"],
.lw-dialog-content[data-state="closed"] {
  pointer-events: none;
}

.lw-collapse {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 200ms ease;
}

.lw-collapse[data-open="true"] {
  grid-template-rows: 1fr;
}

.lw-collapse > div {
  overflow: hidden;
}

@keyframes icon-pop {
  0% {
    transform: scale(1.4);
  }
  100% {
    transform: scale(1);
  }
}

.animate-icon-pop {
  display: inline-flex;
  animation: icon-pop 200ms ease-out;
}

/* Monaco gutter change indicators */
.gutter-added,
.gutter-modified,
.gutter-deleted {
  cursor: pointer;
  margin-left: 3px;
}

.gutter-added {
  border-left: 3px solid #73c991;
}

.gutter-modified {
  border-left: 3px solid #6c95cb;
}

.gutter-deleted {
  border-left: 3px solid #c74e39;
}

/* Diff peek widget (Monaco view zone) */
.diff-peek-widget {
  background: var(--color-surface);
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  font-size: 12px;
  overflow: hidden;
  pointer-events: auto;
  border-top: 2px solid var(--color-border);
  border-bottom: 2px solid var(--color-border);
}

.diff-peek-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 28px;
  padding: 0 6px 0 calc(2ch + 12px);
  background: var(--color-surface-overlay);
  user-select: none;
}

.diff-peek-label {
  color: var(--color-foreground);
  font-size: 12px;
  font-weight: 400;
}

.diff-peek-nav {
  display: flex;
  align-items: center;
  gap: 2px;
}

.diff-peek-counter {
  color: var(--color-muted);
  font-size: 11px;
  min-width: 32px;
  text-align: center;
}

.diff-peek-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 3px;
  background: transparent;
  color: var(--color-muted);
  font-size: 18px;
  cursor: pointer;
  line-height: 1;
}

.diff-peek-btn:hover:not(:disabled) {
  background: var(--color-surface-raised);
  color: var(--color-foreground);
}

.diff-peek-btn:disabled {
  opacity: 0.35;
  cursor: default;
}

.diff-peek-close {
  margin-left: 2px;
}

.diff-peek-body {
  max-height: 300px;
  overflow-y: auto;
  overflow-x: hidden;
  line-height: 20px;
  padding: 0;
}

.diff-peek-line {
  padding: 0 8px 0 4px;
  white-space: pre;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--color-muted);
}

.diff-peek-marker {
  user-select: none;
}

.diff-peek-marker-del {
  color: #b91c1c;
}

.diff-peek-marker-add {
  color: #15803d;
}

.dark .diff-peek-marker-del {
  color: #f87171;
}

.dark .diff-peek-marker-add {
  color: #4ade80;
}

.diff-peek-del {
  background: rgba(229, 83, 75, 0.15);
}

.diff-peek-add {
  background: rgba(115, 201, 145, 0.15);
}

/* emoji-picker-react overrides */
.EmojiPickerReact {
  border-color: var(--color-border) !important;
}

.EmojiPickerReact .epr-search-container input {
  border-radius: 8px !important;
}

.EmojiPickerReact .epr-header > :first-child {
  padding-top: 10px !important;
}
